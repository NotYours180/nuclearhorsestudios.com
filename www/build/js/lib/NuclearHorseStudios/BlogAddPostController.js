define([],function(){return function(e,t,n){var r=this,i=!1;e.$on("setBlogPost",function(t,n){e.post=n}),e.savePost=function(e){if(!e.addForm.$valid){e.status="Form Invalid";return}if(i===!0)return;i=!0,e.post.date=(new Date).getTime(),e.status="Submitting form ...",t.add(e.post).success(function(t,n,r,s){e.resetPost(),e.status="Post Successful!",i=!1}).error(function(t,n,r,i){e.status=n+" - "+t.error+":"+t.reason})},e.resetPost=function(){e.post={},e.post.date=(new Date).getTime(),e.post.type="blogpost",e.status=""},e.resetPost()}});