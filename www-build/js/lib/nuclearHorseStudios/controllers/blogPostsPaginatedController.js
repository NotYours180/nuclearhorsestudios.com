define(["underscore"],function(){return function($scope,blogData){var _requestedPage,_requestedItemsPerPage;$scope.currentPage=1,$scope.itemsPerPage=5,$scope.totalPosts=0,$scope.onGetPage=function(data){$scope.posts=_(data.rows).map(function(row){return row.value}),$scope.currentPage=_requestedPage,$scope.itemsPerPage=_requestedItemsPerPage,$scope.totalPosts=data.total_rows,$scope.numPages=parseInt($scope.totalPosts/$scope.itemsPerPage,10)},$scope.getPage=function(pageNum,itemsPerPage){return _requestedPage=pageNum,_requestedItemsPerPage=itemsPerPage,blogData.getPage(pageNum,itemsPerPage).success($scope.onGetPage)}}});