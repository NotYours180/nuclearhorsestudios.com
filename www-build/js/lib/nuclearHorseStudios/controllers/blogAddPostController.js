define([],function(){return function($scope,blogData){$scope.isPosting=!1,$scope.$on("setBlogPost",function(ev,post){$scope.post=post}),$scope.onAddSuccess=function(){$scope.resetPost(),$scope.status="Post Successful!"},$scope.onAddError=function(data,status){$scope.status=status+" - "+data.error+": "+data.reason},$scope.savePost=function(scope){if($scope=scope,scope.addForm.$valid){if(scope.isPosting===!0)return;scope.isPosting=!0,scope.post.date=(new Date).getTime(),scope.status="Submitting form ...",blogData.add($scope.post).success($scope.onAddSuccess).error($scope.onAddError).finally(function(){scope.isPosting=!1})}else scope.status="Form Invalid"},$scope.resetPost=function(){$scope.post={},$scope.post.date=(new Date).getTime(),$scope.post.type="blogpost",$scope.status=""},$scope.resetPost()}});